function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,immediate||func.apply(context,args)},wait),immediate&&!timeout&&func.apply(context,args)}}$(document).ready(function(){var rank=function(){console.log("in rank")},parent=document.querySelectorAll(".map");parent.length&&$.getScript(CS.domain+"/assets/scripts/vendor/d3.v3.min.js",function(){rank(parent)})}),$(function(){$("#section-switch a").click(function(e){e.preventDefault(),$("#section-switch li").removeClass("active"),$(this).parent("li").addClass("active"),$(".tab-content").addClass("hidden");var dest=$(this).attr("href");$(dest).removeClass("hidden")}),$('[data-toggle="dropdown"]').click(function(e){e.preventDefault(),e.stopPropagation();var parent=$(this).parent(".dropdown");parent.toggleClass("open"),$(".dropdown.open").not(parent).removeClass("open")}),$(document).click(function(){$(".dropdown.open").removeClass("open")})}),$(document).ready(function(){var header_height=$("#site-header").outerHeight(),check_sticky=function(){$(document).scrollTop()>=header_height?$("#parameters-controls").addClass("sticky"):$("#parameters-controls").removeClass("sticky")};$(document).on("scroll",check_sticky),$(window).on("resize",debounce(function(){header_height=$("#site-header").outerHeight()},50)),check_sticky()}),$(function(){$(".browsehappy").on("click",function(){$(this).slideUp("fast")})}),function(){var app=angular.module("countryApp",[],function($interpolateProvider){$interpolateProvider.startSymbol("//"),$interpolateProvider.endSymbol("//")});app.controller("CountryListController",["$http",function($http){_self=this,this.countries=[],this.sortField="overall_ranking",this.sortReverse=!1;var getRequestUrl=function(regionId){return regionId=regionId||null,null==regionId?CS.domain+"/"+CS.lang+"/api/countries.json":CS.domain+"/"+CS.lang+"/api/regions/"+regionId+".json"};this.setSort=function(field){_self.sortField=field,_self.sortReverse=!_self.sortReverse},this.calcBarSegment=function(param){return weight=null!=param.weight?param.weight:.25,param.value*weight*20+"%"},this.getCountryUrl=function(country){if(CS.countryIndex){var iso=country.iso.toLowerCase();return CS.countryIndex[iso]}return""},CS.regionId?$http.get(getRequestUrl(CS.regionId)).success(function(data){_self.countries=data.countries}):$http.get(getRequestUrl()).success(function(data){_self.countries=data})}])}();